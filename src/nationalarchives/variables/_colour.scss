@use "sass:map";
@use "../features";

$tna-black: #000;
$tna-grey: #8c9694;
$tna-light-grey: #d9d9d6;
$tna-white: #fff;

$tna-yellow: #fc0;
$tna-pink: #fe1d57;
$tna-orange: #fd3f03;
$tna-green: #86bc25;
$tna-blue: #00b0ff;

$tna-brown: #654e37;
$tna-maroon: #9c193a;
$tna-chestnut: #8f3415;
$tna-forest: #00623b;
$tna-navy: #004c7e;

$tna-cream: #f9f7e2;
$tna-pastel-pink: #fad3d4;
$tna-pastel-orange: #f9e1bc;
$tna-pastel-green: #dde5d5;
$tna-pastel-blue: #d4e5ef;

$dark-grey: #26262a;
$base-font: #343338;

$colour-palette-default: (
  "page-background": $tna-white,
  "font-base": $base-font,
  "font-dark": $tna-black,
  "font-light": rgba($base-font, 0.7),
  "link": #1d70ab,
  "link-visited": #4c2c92,
  "focus-outline": #004c7e,
  "keyline": #ccc,
  "keyline-dark": $dark-grey,
);

$colour-palette-dark: map.merge(
  $colour-palette-default,
  (
    "page-background": $dark-grey,
    "font-base": rgba($tna-white, 0.95),
    "font-dark": $tna-white,
    "font-light": rgba($tna-white, 0.8),
    "link": #f0a,
    "link-visited": #90f,
    "focus-outline": $tna-yellow,
    "keyline": rgba($tna-white, 0.5),
    "keyline-dark": $tna-white,
  )
);

$colour-palette-high-contrast: map.merge(
  $colour-palette-default,
  (
    "font-base": $tna-black,
    "font-light": $tna-black,
    "focus-outline": $tna-blue,
    "keyline": $tna-black,
    "keyline-dark": $tna-black,
  )
);

$colour-palette-high-contrast-dark: map.merge(
  $colour-palette-dark,
  (
    "page-background": $tna-black,
    "font-base": $tna-white,
    "font-light": $tna-white,
    "keyline": $tna-white,
  )
);

@mixin colour-css-vars() {
  @if features.$support-css-variables {
    @each $name, $value in $colour-palette-default {
      --#{$name}: #{$value};
    }
  }
}

@mixin colour-css-vars-dark() {
  @if features.$support-css-variables {
    @each $name, $value in $colour-palette-dark {
      --#{$name}: #{$value};
    }
  }
}

@mixin colour-css-vars-high-contrast() {
  @if features.$support-css-variables {
    @each $name, $value in $colour-palette-high-contrast {
      --#{$name}: #{$value};
    }
  }
}

@mixin colour-css-vars-high-contrast-dark() {
  @if features.$support-css-variables {
    @each $name, $value in $colour-palette-high-contrast-dark {
      --#{$name}: #{$value};
    }
  }
}

@mixin colour-font($colour, $inverted: false) {
  @if $inverted {
    color: map.get($colour-palette-dark, $colour);
  } @else {
    color: map.get($colour-palette-default, $colour);
  }
  @if features.$support-css-variables {
    color: var(--#{$colour});
  }
}

@mixin colour-background($colour, $inverted: false) {
  @if $inverted {
    background-color: map.get($colour-palette-dark, $colour);
  } @else {
    background-color: map.get($colour-palette-default, $colour);
  }
  @if features.$support-css-variables {
    background-color: var(--#{$colour});
  }
}

@mixin colour-border($colour, $inverted: false) {
  @if $inverted {
    border-color: map.get($colour-palette-dark, $colour);
  } @else {
    border-color: map.get($colour-palette-default, $colour);
  }
  @if features.$support-css-variables {
    border-color: var(--#{$colour});
  }
}

@mixin colour-outline($colour, $inverted: false) {
  @if $inverted {
    outline-color: map.get($colour-palette-dark, $colour);
  } @else {
    outline-color: map.get($colour-palette-default, $colour);
  }
  @if features.$support-css-variables {
    outline-color: var(--#{$colour});
  }
}

@mixin colour-fill($colour, $inverted: false) {
  @if $inverted {
    fill: map.get($colour-palette-dark, $colour);
  } @else {
    fill: map.get($colour-palette-default, $colour);
  }
  @if features.$support-css-variables {
    fill: var(--#{$colour});
  }
}

@mixin invert {
  @include colour-css-vars-dark;

  @media (prefers-contrast: more) {
    @include colour-css-vars-high-contrast-dark;
  }

  @if features.$support-colour-schemes {
    @media (prefers-color-scheme: dark) {
      @include colour-css-vars;
    }

    @media (prefers-contrast: more) and (prefers-color-scheme: dark) {
      @include colour-css-vars-high-contrast;
    }
  }

  @include colour-font("font-base", true);
  @include colour-background("page-background", true);
}
